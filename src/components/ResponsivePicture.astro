---
import { Picture } from "astro:assets";
import type { ImageMetadata } from "astro";

interface Props {
	src: ImageMetadata | null;
	alt: string;
	class?: string;
	widths?: number[];
	sizes?: string;
	formats?: string[];
}

// Default widths include very large sizes for high-DPI and large displays
const defaultWidths = [480, 720, 960, 1440, 2000, 2880, 3840];
// Default sizes: 100vw for full-width, override as needed
const defaultSizes = "100vw";
const defaultFormats = ["avif", "webp"];

const { src, alt, class: className, widths = defaultWidths, sizes = defaultSizes, formats = defaultFormats } = Astro.props;
---

{
	src ? (
		<Picture src={src} alt={alt} class={className} widths={widths} sizes={sizes} formats={formats} loading="lazy" decoding="async" />
	) : (
		<p>Image not found: {alt}</p>
	)
}